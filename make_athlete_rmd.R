
# Create Athlete results Rmd -------------------------------------------------



header <- paste0({
"# (PART) Competitor Results {#athletes}

<!-- Do not edit this file -->
<!-- This Rmd file is created using make_race_rmd.R -->

"
})


repeated <- foreach (k=athletes_ordered, .combine = paste0 ) %do% {
  
  
  k_ref <- gsub(pattern = " ", "-", k)  
  k_ref <- gsub(pattern = "'", "", k_ref)  
  
  n_courses <- length(unique(dt_all_long[Name==k, .(course)]$course))

  
  
  
  paste0(
    "
",
"# ", k, " {#a-", k_ref, "}

All races in the season are shown below, if more than one type of course (Full, Intermediate, or Double Distance) has been entered then separate plots are shown.

",

'```{r}
htmltools::tags$iframe(
  src = "',paste0(k,".html"),'", 
  scrolling = "no", 
  seamless = "seamless",
  frameBorder = "0",
  width = "100%",
  height = "',500*n_courses,'"
)
```



Please let me know if any split times have been incorrectly flagged as invalid.


'
)
  
  
}


write(paste0(header, repeated),file = "02-athlete_generated.Rmd")
